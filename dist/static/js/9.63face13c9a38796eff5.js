webpackJsonp([9],{WBo6:function(t,e){},wvNF:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("mtWM"),i=n.n(a),l=n("2uFj"),s=1e3,o={data:function(){return{filterText:"",list:null,current:{},modal:{add:!1,del:!1},add:{name:"",parent:"",uId:JSON.parse(this.$localStorage.get("userInfo")).uId},del:{uId:JSON.parse(this.$localStorage.get("userInfo")).uId,id:""},defaultProps:{children:"children",label:"name"}}},created:function(){this.getList()},methods:{getChecked:function(){},getList:function(){var t=this;this.list=[],i()({method:"get",url:l.a}).then(function(e){t.list.push(e.data.data)})},addSubmit:function(){var t=this;i()({method:"get",url:l.d,params:this.add}).then(function(e){t.$message({message:e.data.msg,type:e.data.status?"success":"error"}),t.modal.add=!1,t.getList()})},modalAdd:function(t,e){this.current=e,this.add.parent=e.uId,this.modal.add=!0},delSubmit:function(){var t=this;i()({method:"get",url:l.o,params:this.del}).then(function(e){t.$message({message:e.data.msg,type:e.data.status?"success":"error"}),t.modal.del=!1,t.getList()}),this.modal.del=!1},modalDel:function(t,e){this.current=e,this.del.id=e.uId,this.modal.del=!0},append:function(t){var e={id:s++,label:"testtest",children:[]};t.children||this.$set(t,"children",[]),t.children.push(e)},remove:function(t,e){var n=t.parent,a=n.data.children||n.data,i=a.findIndex(function(t){return t.id===e.id});a.splice(i,1)},renderContent:function(t,e){var n=this,a=e.node,i=e.data;e.store;return t("span",{style:"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;"},[t("span",null,[t("span",null,[this.renderParent(i),i.name])]),t("span",{class:"do"},[t("el-button",{attrs:{title:"添加子部门",plain:!0,size:"mini",icon:"el-icon-plus"},style:"font-size: 12px;",on:{click:function(){return n.modalAdd(a,i)}}},[]),t("el-button",{attrs:{title:"删除该部门",plain:!0,size:"mini",icon:"el-icon-minus"},style:"font-size: 12px;",on:{click:function(){return n.modalDel(a,i)}}},[])])])},renderParent:function(t){var e=this.$createElement;return t.children.length?e("span",{class:"iconfont icon-folder",style:"margin-right:5px;"},[]):t.name.indexOf("总监")>-1?e("span",{class:"iconfont icon-yonghu",style:"margin-right:5px;"},[]):t.name.indexOf("经理")>-1?e("span",{class:"iconfont icon-leader",style:"margin-right:5px;"},[]):t.name.indexOf("组长")>-1?e("span",{class:"iconfont icon-icon-",style:"margin-right:5px;"},[]):e("span",{class:"iconfont icon-list",style:"margin-right:5px;"},[])},filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)}},watch:{filterText:function(t){this.$refs.tree.filter(t)}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-view",staticStyle:{"padding-bottom":"10px"}},[n("div",{staticStyle:{height:"55px","margin-top":"-55px",padding:"8px 10px"}},[n("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),t._v(" "),t.list?n("div",{staticClass:"admin-main",staticStyle:{overflow:"auto"}},[n("el-tree",{ref:"tree",staticStyle:{padding:"20px"},attrs:{data:t.list,props:t.defaultProps,"node-key":"id","default-expand-all":!1,"expand-on-click-node":!1,"filter-node-method":t.filterNode,getCheckedNodes:t.getChecked,"render-content":t.renderContent}})],1):t._e(),t._v(" "),n("el-dialog",{attrs:{title:"填写部门名称",visible:t.modal.add,width:"30%"},on:{"update:visible":function(e){t.$set(t.modal,"add",e)}}},[n("p",{staticStyle:{"margin-bottom":"20px"}},[t._v("您正在添加"),n("span",{staticStyle:{color:"#D94447",margin:"0 5px"}},[t._v(t._s(t.current.name))]),t._v("的二级部门")]),t._v(" "),n("el-input",{attrs:{placeholder:"请填写部门名称",clearable:""},model:{value:t.add.name,callback:function(e){t.$set(t.add,"name",e)},expression:"add.name"}}),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.modal.add=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.addSubmit}},[t._v("确 定")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"确认删除",visible:t.modal.del,width:"30%"},on:{"update:visible":function(e){t.$set(t.modal,"del",e)}}},[n("p",{staticStyle:{"margin-bottom":"20px"}},[t._v("您正在删除"),n("span",{staticStyle:{color:"#D94447",margin:"0 5px"}},[t._v(t._s(t.current.name))])]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.modal.del=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.delSubmit}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var r=n("VU/8")(o,d,!1,function(t){n("WBo6")},null,null);e.default=r.exports}});
//# sourceMappingURL=9.63face13c9a38796eff5.js.map